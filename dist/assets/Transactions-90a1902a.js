import{_ as C,t as U,j as e,i as V,u as I,T as f,L as w}from"./index-ef39a2f6.js";import{P as y}from"./PageHeader-10c86050.js";import{T as R,N as l,a}from"./antd-9d697ed4.js";import{S as _}from"./Spring-6b72002e.js";import{C as A}from"./Trend-c4b35449.js";import{S as F}from"./index-a2d35cc8.js";import{u as O,P as B}from"./Pagination-a19695bd.js";import{P as d,C as L}from"./mui-1e0dcca7.js";import{e as $}from"./helpers-9e24967e.js";import{E as M}from"./Empty-7ea42ef3.js";import{T as q}from"./columnDefs-165fae6d.js";import{a as K,U as z}from"./config-48affdd3.js";import"./DocumentTitle-2a888c10.js";import"./RatingStars-e031ae22.js";import"./SubmenuTrigger-7c7517d7.js";import"./Timestamp-6335f4b0.js";import"./Counter-62b3ca37.js";const Y=C(R).withConfig({displayName:"styles__StyledTable",componentId:"sc-kirxdx-0"})(["margin-bottom:26px;flex-grow:1;.ant-table-thead{position:relative;&::after{content:'';position:absolute;left:0;bottom:0;height:1px;width:100%;opacity:.6;background:var(--input-border);}.ant-table-cell{background:var(--widget) !important;padding:30px 26px 24px !important;border:none !important;}}.ant-table-tbody{tr:nth-child(odd) .ant-table-cell{background:"," !important;}tr:nth-child(even) .ant-table-cell{background:var(--widget) !important;}.ant-table-cell{border:none;padding:24px 26px 26px;}}"],U("theme",{light:"var(--body)",dark:"rgba(39, 50, 65, .2)"})),T=({transaction:s,activeCollapse:i,handleCollapse:r})=>{var m,u,c;return console.log("transaction",s),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-[18px]",children:[e.jsxDEV("div",{className:"img-wrapper w-[40px] h-[40px] flex items-center justify-center shrink-0",children:e.jsxDEV("img",{className:"max-w-[30px]",src:(m=s==null?void 0:s.seller)==null?void 0:m.logo,alt:(u=s==null?void 0:s.seller)==null?void 0:u.name},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:18,columnNumber:25},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:17,columnNumber:21},globalThis),e.jsxDEV("span",{className:"h6 hidden truncate xs:inline",children:(c=s==null?void 0:s.seller)==null?void 0:c.name},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:20,columnNumber:21},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:16,columnNumber:17},globalThis),e.jsxDEV("div",{className:"flex items-center gap-2.5 shrink-0",children:[e.jsxDEV("p",{className:"text-sm font-medium",children:l(s==null?void 0:s.timestamp).format("DD.MM.YY, hh:mm")},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:23,columnNumber:21},globalThis),e.jsxDEV("button",{className:`collapse-btn ${i===(s==null?void 0:s.sku)?"active":""}`,"aria-label":"Toggle view",onClick:()=>r(s==null?void 0:s.sku),children:e.jsxDEV("i",{className:"icon icon-caret-down-solid"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:25,columnNumber:25},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:24,columnNumber:21},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:22,columnNumber:17},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:15,columnNumber:13},globalThis),e.jsxDEV(L,{in:i===s.sku,children:e.jsxDEV("table",{className:"basic-table",children:e.jsxDEV("tbody",{children:[e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:"SKU"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:33,columnNumber:25},globalThis),e.jsxDEV("td",{children:s.sku},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:34,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:32,columnNumber:21},globalThis),e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:"Method"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:37,columnNumber:25},globalThis),e.jsxDEV("td",{children:s.method},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:38,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:36,columnNumber:21},globalThis),e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:"Type"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:41,columnNumber:25},globalThis),e.jsxDEV("td",{className:"capitalize",children:s.type},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:42,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:40,columnNumber:21},globalThis),e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:"Status"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:45,columnNumber:25},globalThis),e.jsxDEV("td",{children:e.jsxDEV("span",{className:"badge-status",style:{backgroundColor:`var(--${$(s.status)})`,width:"100%"},children:s.status},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:47,columnNumber:29},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:46,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:44,columnNumber:21},globalThis),e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:"Country"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:56,columnNumber:25},globalThis),e.jsxDEV("td",{children:s.country},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:57,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:55,columnNumber:21},globalThis),e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:"Currency"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:60,columnNumber:25},globalThis),e.jsxDEV("td",{children:s.currency},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:61,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:59,columnNumber:21},globalThis),e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:"Fee"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:64,columnNumber:25},globalThis),e.jsxDEV("td",{children:["$",s.fee]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:65,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:63,columnNumber:21},globalThis),e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:"Tax"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:68,columnNumber:25},globalThis),e.jsxDEV("td",{children:s.tax},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:69,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:67,columnNumber:21},globalThis),e.jsxDEV("tr",{children:[e.jsxDEV("td",{children:"Total"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:72,columnNumber:25},globalThis),e.jsxDEV("td",{children:["$",(s.fee-s.fee/100*s.tax).toFixed(2)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:73,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:71,columnNumber:21},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:31,columnNumber:21},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:30,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:29,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/TransactionCollapseItem.jsx",lineNumber:14,columnNumber:10},globalThis)};T.propTypes={transaction:d.object.isRequired,activeCollapse:d.string.isRequired,handleCollapse:d.func.isRequired};const G=async()=>{try{const s=V("application/json");return(await K.get(`${z}transaction`,s)).data}catch(s){throw console.error("Failed to fetch reviews",s),s}},H=async()=>{try{return(await G()).map((r,m)=>({sku:r.transactionNo,timestamp:new Date(r.createdAt),method:r.bankCode,type:r.transactionStatus||"unknown",status:r.responseCode==="00"?"Thành công":"Thất bại",amount:r.amount,id:r._id,order_id:r.order_id,transactionNo:r.transactionNo}))}catch(s){throw console.error("Failed to fetch transactions",s),s}},X=()=>{const{width:s}=I(),[i,r]=a.useState(""),[m,u]=a.useState(f[0]),[c,v]=a.useState([]),[g,p]=a.useState([]),[E,j]=a.useState(!0),[h,W]=a.useState(null),[N,S]=a.useState([l().startOf("year"),l()]),t=O(g,6);a.useEffect(()=>{(async()=>{try{const n=await H();v(n),p(n)}catch(n){W("Failed to fetch transactions"),console.error("Error fetching transactions",n)}finally{j(!1)}})()},[]),a.useEffect(()=>{(()=>{const[n,D]=N,P=c.filter(b=>l(b.timestamp).isAfter(n,"day")&&l(b.timestamp).isBefore(D,"day")).sort((b,x)=>m.value==="recent"?l(x.timestamp).isBefore(l(b.timestamp))?1:-1:m.value==="oldest"?l(b.timestamp).isBefore(l(x.timestamp))?1:-1:0);p(P)})()},[N,c,m]);const k=o=>{r(n=>n===o?"":o)};return E?e.jsxDEV(w,{},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:66,columnNumber:23},globalThis):h?e.jsxDEV("div",{children:h},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:67,columnNumber:21},globalThis):e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"flex flex-col gap-4 mb-5 md:flex-row justify-between",children:[e.jsxDEV(A,{wrapperClass:"md:max-w-[275px]",id:"transactionsDate",label:"Ngày giao dịch từ",onChange:S},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:70,columnNumber:9},globalThis),e.jsxDEV("div",{className:"flex flex-col-reverse gap-2.5 md:flex-col md:min-w-[220px]",children:[e.jsxDEV("p",{className:"md:text-right",children:["Xem giao dịch: ",t.showingOf()]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:72,columnNumber:11},globalThis),e.jsxDEV(F,{options:f,value:m,onChange:u},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:75,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:71,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:69,columnNumber:7},globalThis),e.jsxDEV(_,{className:"flex flex-col flex-1",children:[s>=768?e.jsxDEV(Y,{columns:q,dataSource:t.currentItems(),rowKey:o=>o.sku,locale:{emptyText:e.jsxDEV(M,{text:"Không tìm thấy giao dịch nào"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:80,columnNumber:20},globalThis)},pagination:!1},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:79,columnNumber:25},globalThis):e.jsxDEV("div",{className:"flex flex-1 flex-col gap-5 mb-[26px]",children:t.currentItems().map(o=>e.jsxDEV(T,{handleCollapse:k,activeCollapse:i,transaction:o},o.sku,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:82,columnNumber:52},globalThis))},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:81,columnNumber:34},globalThis),t.maxPage>1&&e.jsxDEV(B,{pagination:t},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:84,columnNumber:36},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:78,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/TransactionsTable/index.jsx",lineNumber:68,columnNumber:10},globalThis)},he=()=>e.jsxDEV(e.Fragment,{children:[e.jsxDEV(y,{title:"Giao dịch"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Transactions.jsx",lineNumber:6,columnNumber:7},globalThis),e.jsxDEV(X,{},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Transactions.jsx",lineNumber:7,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Transactions.jsx",lineNumber:5,columnNumber:10},globalThis);export{he as default};
