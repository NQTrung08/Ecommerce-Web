import{j as e,k as w,i as V,P as y,O as _,g as I}from"./index-93ad03ec.js";import{P as C}from"./PageHeader-6064baed.js";import{S as F}from"./Spring-11e7d3fd.js";import{C as L}from"./Counter-4318582c.js";import{S as A}from"./SubmenuTrigger-4c84cfed.js";import{P as S}from"./mui-5cae2f92.js";import{a as s,N as E,P as R}from"./antd-1b54411e.js";/* empty css                      */import{U as M,a as $}from"./config-7d6b9c27.js";import"./DocumentTitle-91daf260.js";import"./helpers-a36af1df.js";const g=({icon:i,color:a="accent",title:t="Lorem ipsum",count:n=0})=>e.jsxDEV(F,{className:"card !pb-5",children:[e.jsxDEV("div",{className:"flex justify-between items-start",children:[e.jsxDEV("div",{className:"badge-icon badge-icon--sm",style:{backgroundColor:`var(--${a})`},children:i},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/OrdersInfobox.jsx",lineNumber:16,columnNumber:17},globalThis),e.jsxDEV(A,{},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/OrdersInfobox.jsx",lineNumber:21,columnNumber:17},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/OrdersInfobox.jsx",lineNumber:15,columnNumber:13},globalThis),e.jsxDEV("h6",{className:"mt-[28px] mb-2.5",children:[e.jsxDEV("span",{className:"xl:hidden 2xl:inline",children:"Orders "},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/OrdersInfobox.jsx",lineNumber:24,columnNumber:17},globalThis),t]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/OrdersInfobox.jsx",lineNumber:23,columnNumber:13},globalThis),e.jsxDEV(L,{className:"h3",num:n},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/OrdersInfobox.jsx",lineNumber:27,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/OrdersInfobox.jsx",lineNumber:14,columnNumber:10},globalThis);g.propTypes={icon:S.node,color:S.oneOf(["accent","green","red","badge-status-bg"]),title:S.string,count:S.number};const H=({initialOrders:i})=>{const[a,t]=s.useState(i),[n,D]=s.useState(""),[x,j]=s.useState(""),[b,W]=s.useState(""),[d,p]=s.useState(""),[u,h]=s.useState(1),[N]=s.useState(10),f=a.filter(r=>{var l;const m=E(r.createdAt),c=n?m.isAfter(E(n).subtract(1,"day")):!0,O=x?m.isBefore(E(x).add(1,"day")):!0,k=b?(l=r.order_shopId)==null?void 0:l.shop_name.toLowerCase().includes(b.toLowerCase()):!0,o=d?r.order_trackingNumber.toLowerCase().includes(d.toLowerCase()):!0;return c&&O&&k&&o}),v=f.slice((u-1)*N,u*N),T=r=>{h(r)};return e.jsxDEV("div",{className:"space-y-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxDEV("div",{className:"mb-4 flex space-x-4",children:[e.jsxDEV("div",{className:"w-full",children:[e.jsxDEV("label",{htmlFor:"shop-filter",className:"block text-lg font-medium text-gray-700",children:"Tên Shop:"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:66,columnNumber:11},globalThis),e.jsxDEV("input",{type:"text",id:"shop-filter",className:"mt-1 block w-full border-2 border-gray-300 p-2 rounded-md shadow-sm focus:ring focus:ring-indigo-200",value:b,onChange:r=>W(r.target.value)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:69,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:65,columnNumber:9},globalThis),e.jsxDEV("div",{className:"w-full",children:[e.jsxDEV("label",{htmlFor:"order-id-filter",className:"block text-lg font-medium text-gray-700",children:"Mã đơn hàng:"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:72,columnNumber:11},globalThis),e.jsxDEV("input",{type:"text",id:"order-id-filter",className:"mt-1 block w-full border-2 border-gray-300 p-2 rounded-md shadow-sm focus:ring focus:ring-indigo-200",value:d,onChange:r=>p(r.target.value)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:75,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:71,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:64,columnNumber:7},globalThis),v.length===0?e.jsxDEV("p",{className:"text-gray-600 text-center",children:"Không có đơn hàng nào để hiển thị."},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:80,columnNumber:39},globalThis):v.map(r=>{var m;return e.jsxDEV("div",{className:"flex justify-between items-center border-b py-4 px-6 bg-white rounded-lg shadow-md",children:[e.jsxDEV("div",{className:"flex items-center mx-3",children:[(m=r.order_shopId)!=null&&m.logo?e.jsxDEV("img",{src:r.order_shopId.logo,alt:"Shop Logo",className:"w-20 h-20 rounded-full mr-4"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:85,columnNumber:43},globalThis):e.jsxDEV("div",{className:"w-20 h-20 bg-gray-200 rounded-full mr-4 flex items-center justify-center",children:e.jsxDEV("span",{className:"text-gray-600",children:"No Logo"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:86,columnNumber:19},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:85,columnNumber:139},globalThis),e.jsxDEV("div",{children:r.order_shopId?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("p",{className:"text-lg text-gray-800 font-semibold",children:["Shop: ",r.order_shopId.shop_name]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:90,columnNumber:21},globalThis),e.jsxDEV("p",{className:"text-base text-gray-600",children:["Địa chỉ: ",r.order_shopId.address]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:93,columnNumber:21},globalThis),e.jsxDEV("p",{className:"text-base text-gray-600",children:["Điện thoại: ",r.order_shopId.phone_number]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:96,columnNumber:21},globalThis),e.jsxDEV("p",{className:"text-base text-gray-600",children:["Mô tả: ",r.order_shopId.description]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:99,columnNumber:21},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:89,columnNumber:39},globalThis):e.jsxDEV("p",{className:"text-base text-rose-600",children:"Shop bị khóa"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:102,columnNumber:25},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:88,columnNumber:15},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:84,columnNumber:13},globalThis),e.jsxDEV("div",{className:"flex justify-between items-start w-5/12",children:e.jsxDEV("div",{className:"w-full",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-800",children:["Mã đơn hàng:"," ",e.jsxDEV("span",{className:"text-blue-600",children:r.order_trackingNumber},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:110,columnNumber:19},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:108,columnNumber:17},globalThis),e.jsxDEV("p",{className:"text-sm text-gray-600",children:["Ngày tạo: ",E(r.createdAt).format("DD/MM/YYYY")]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:114,columnNumber:17},globalThis),e.jsxDEV("p",{className:"text-sm text-gray-600",children:["Trạng thái:"," ",e.jsxDEV("span",{className:"font-medium",children:r.order_status},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:119,columnNumber:19},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:117,columnNumber:17},globalThis),e.jsxDEV("p",{className:"text-sm text-gray-600",children:["Địa chỉ giao hàng: ",r.order_shipping_address]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:121,columnNumber:17},globalThis),e.jsxDEV("p",{className:"text-sm text-gray-600",children:["Phương thức thanh toán:"," ",e.jsxDEV("span",{className:"font-medium",children:r.order_payment_method.toUpperCase()},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:126,columnNumber:19},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:124,columnNumber:17},globalThis),e.jsxDEV("p",{className:"text-sm font-semibold text-gray-800",children:["Tổng tiền:"," ",e.jsxDEV("span",{className:"text-red-600",children:[r.order_total_price.toLocaleString(),"₫"]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:132,columnNumber:19},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:130,columnNumber:17},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:107,columnNumber:15},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:106,columnNumber:13},globalThis)]},r._id,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:82,columnNumber:45},globalThis)}),e.jsxDEV(R,{current:u,total:f.length,pageSize:N,onChange:T,showSizeChanger:!1,className:"mt-4"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:140,columnNumber:7},globalThis),e.jsxDEV(w,{},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:142,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/OrdersTableShop/index.jsx",lineNumber:28,columnNumber:10},globalThis)},U=async i=>{try{const a=V("application/json"),t=`${M}order${i?`?status=${i}`:""}`;return(await $.get(t,a)).data}catch(a){throw console.error("Failed to fetch orders:",a),a}},re=()=>{const[i,a]=s.useState(y[0]),[t,n]=s.useState(_[0]),[D,x]=s.useState([]),[j,b]=s.useState([]),[W,d]=s.useState(!0),[p,u]=s.useState(null),[h,N]=s.useState("pending"),[f,v]=s.useState([]),T=[{value:"",name:"Tất cả đơn hàng"},{value:"pending",name:"Chờ xử lý"},{value:"confirmed",name:"Đã xác nhận"},{value:"shipped",name:"Đang vận chuyển"},{value:"completed",name:"Hoàn thành"},{value:"canceled",name:"Đã hủy"},{value:"waiting",name:"Chờ thanh toán"}];s.useEffect(()=>{(async()=>{d(!0);try{const l=await U(h),P=await U();x(l),b(P)}catch(l){console.error("Error fetching orders:",l),u("Không thể tải đơn hàng. Vui lòng thử lại.")}finally{d(!1)}})()},[h]);const r=o=>{v(l=>[...l,o])},m=D.filter(o=>!f.includes(o.id)),c=o=>j.filter(P=>P.order_status===o).length,O=()=>T.map(o=>e.jsxDEV("button",{onClick:()=>N(o.value),className:`py-2 px-4 rounded-lg text-sm ${h===o.value?"bg-blue-500 text-white":"bg-slate-100 text-gray-700 border-slate-200 border-2"}`,children:o.name},o.value,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:67,columnNumber:62},globalThis));console.log("first",j,c("completed"));const k=()=>e.jsxDEV("div",{className:"widgets-grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:col-span-4",children:[e.jsxDEV(g,{title:"Hoàn thành",count:c("completed"),icon:e.jsxDEV("i",{className:"icon-check-to-slot-solid"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:73,columnNumber:88},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:73,columnNumber:7},globalThis),e.jsxDEV(g,{title:"Chờ xác nhận",count:c("pending"),color:"badge-status-bg",icon:e.jsxDEV("i",{className:"icon-rotate-left-solid"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:74,columnNumber:112},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:74,columnNumber:7},globalThis),e.jsxDEV(g,{title:"Đã xác nhận",count:c("confirmed"),color:"green",icon:e.jsxDEV("i",{className:"icon-list-check-solid"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:75,columnNumber:103},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:75,columnNumber:7},globalThis),e.jsxDEV(g,{title:"Đã hủy",count:c("canceled"),color:"red",icon:e.jsxDEV("i",{className:"icon-ban-solid"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:76,columnNumber:95},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:76,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:72,columnNumber:38},globalThis);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(C,{title:"Đơn Hàng"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:79,columnNumber:7},globalThis),e.jsxDEV("div",{className:"flex flex-col flex-1 gap-5 md:gap-[26px]",children:[e.jsxDEV("div",{className:"w-full widgets-grid grid-cols-1 ",children:k()},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:81,columnNumber:9},globalThis),e.jsxDEV("div",{className:"flex gap-4",children:O()},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:85,columnNumber:9},globalThis),W?e.jsxDEV(I,{},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:86,columnNumber:20},globalThis):p?e.jsxDEV("p",{className:"text-rose-500",children:p},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:86,columnNumber:41},globalThis):e.jsxDEV(H,{initialOrders:m,category:i,sort:t,onOrderUpdate:r},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:86,columnNumber:84},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:80,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Orders.jsx",lineNumber:78,columnNumber:10},globalThis)};export{re as default};
