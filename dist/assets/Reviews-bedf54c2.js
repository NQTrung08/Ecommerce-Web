import{e as w,u as E,j as e,M as j,h as x,R as N,g as W}from"./index-93ad03ec.js";import{a as i,N as S}from"./antd-1b54411e.js";import{g as R,a as D,b as T}from"./review-33577dc4.js";import{P}from"./PageHeader-6064baed.js";import{S as f}from"./Spring-11e7d3fd.js";import{S as k}from"./index-cc346166.js";import{S as U}from"./SubmenuTrigger-4c84cfed.js";import{R as d}from"./RatingStars-45691701.js";import{T as V}from"./Timestamp-9dff33a8.js";import{u as A,T as L}from"./web-9c21285d.js";import"./moment-a9aaa855.js";import{u as y,P as C}from"./Pagination-ad6c385c.js";import"./mui-5cae2f92.js";import"./config-7d6b9c27.js";import"./DocumentTitle-91daf260.js";const h=({data:s,wrapperClass:a})=>(console.log("data",s),e.jsxDEV("div",{className:`flex items-center ${a}`,children:[e.jsxDEV("img",{className:"bg-input-border shrink-0 w-10 h-10 rounded-md md:w-[63px] md:h-[63px]",src:s.user.avatar,alt:`${s.user.full_name}`,width:63,height:63},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:24,columnNumber:9},globalThis),e.jsxDEV("div",{className:"flex flex-col gap-1.5 md:gap-2.5",children:[e.jsxDEV("h6",{className:"truncate max-w-[120px] xs:max-w-[180px]",children:s.user.full_name},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:26,columnNumber:11},globalThis),e.jsxDEV("a",{className:"text-btn",href:`mailto:${s.user.email}`,children:e.jsxDEV("span",{className:"truncate max-w-[120px] xs:max-w-[180px]",children:s.user.email},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:30,columnNumber:13},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:29,columnNumber:11},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:25,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:23,columnNumber:10},globalThis)),M=({data:s,index:a=0})=>{const{theme:u}=w(),{width:m}=E(),[b,{width:p}]=A(),l=u==="light"?"var(--body)":"rgba(39,50,65,.2)",[v,c]=i.useState(!1);return i.useEffect(()=>{c(!1)},[m]),e.jsxDEV(f,{index:a,children:[e.jsxDEV("div",{className:"p-5",style:{backgroundColor:a%2===0?l:"var(--widget)"},children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV(h,{data:s,wrapperClass:"gap-5 md:gap-[30px] md:w-[300px]"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:60,columnNumber:21},globalThis),m>=768&&e.jsxDEV("div",{className:"flex items-center gap-[18px] xl:ml-[30px] xl:mr-10 xl:w-[200px]",children:[e.jsxDEV(d,{rating:s.rating},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:62,columnNumber:29},globalThis),e.jsxDEV("span",{className:"label-text",children:s.rating},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:63,columnNumber:29},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:61,columnNumber:38},globalThis),m>=1280&&e.jsxDEV("div",{className:"flex flex-1 gap-5 bg-input-bg border border-input-border h-20 rounded-md max-w-[588px] p-4 overflow-hidden",children:[e.jsxDEV("div",{className:"flex-1 max-w-[513px]",ref:b,children:e.jsxDEV(L,{className:"flex-1",text:s.comment,width:p},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:67,columnNumber:33},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:66,columnNumber:29},globalThis),e.jsxDEV("button",{className:"self-start icon text-[18px] mt-1",onClick:()=>c(!0),"aria-label":"See details",children:e.jsxDEV("i",{className:"icon-message-arrow-up-right-regular"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:70,columnNumber:33},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:69,columnNumber:29},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:65,columnNumber:39},globalThis),m>=1024&&e.jsxDEV(V,{date:s==null?void 0:s.date,wrapperClass:"xl:ml-[30px] xl:mr-[75px]"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:73,columnNumber:39},globalThis),e.jsxDEV("div",{className:"flex gap-4 items-center",children:[e.jsxDEV("button",{className:"icon text-[18px] mt-0.5 xl:hidden",onClick:()=>c(!0),"aria-label":"See details",children:e.jsxDEV("i",{className:"icon-message-arrow-up-right-regular"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:76,columnNumber:29},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:75,columnNumber:25},globalThis),e.jsxDEV(U,{},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:78,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:74,columnNumber:21},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:59,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:56,columnNumber:13},globalThis),e.jsxDEV(j,{open:v,onClose:()=>c(!1),children:e.jsxDEV("div",{className:"card relative no-hover flex flex-col w-full max-w-[400px] will-change-transform",children:[e.jsxDEV("button",{className:"absolute top-5 right-5 icon text-[18px] transition hover:text-red",onClick:()=>c(!1),"aria-label":"Close",children:e.jsxDEV("i",{className:"icon-circle-xmark-regular"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:85,columnNumber:25},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:84,columnNumber:21},globalThis),e.jsxDEV(h,{data:s,wrapperClass:"gap-4 mb-5"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:87,columnNumber:21},globalThis),e.jsxDEV("p",{className:"flex gap-4 mb-2",children:[e.jsxDEV("span",{className:"label-text",children:"Ngày: "},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:89,columnNumber:25},globalThis),e.jsxDEV("span",{className:"text-sm font-medium",children:S(s.date,"HH:mm DD/MM/YYYY").format("DD/MM/YYYY, HH:mm")},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:90,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:88,columnNumber:21},globalThis),e.jsxDEV("div",{className:"flex gap-4 mb-6",children:[e.jsxDEV("span",{className:"label-text",children:"Đánh giá:"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:95,columnNumber:25},globalThis),e.jsxDEV(d,{rating:s.rating},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:96,columnNumber:25},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:94,columnNumber:21},globalThis),e.jsxDEV("div",{className:"bg-input-bg rounded-md border border-input-border h-[240px] p-4 overflow-y-auto",children:s.comment},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:98,columnNumber:21},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:83,columnNumber:17},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:82,columnNumber:13},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/components/Review.jsx",lineNumber:55,columnNumber:10},globalThis)},Y=({reviews:s,totalCount:a,avgRating:u})=>{const{slug:m}=x(),[b,p]=i.useState(s||[]),[l,v]=i.useState(N[0]);i.useEffect(()=>{m&&(async()=>{try{const o=await R(m);console.log("reviewForShop",o),p(o)}catch(o){console.error("Error fetching reviews:",o)}})()},[m,s]);const c=[...b].sort((r,o)=>l.value==="recent"?new Date(o.createdAt)-new Date(r.createdAt):l.value==="oldest"?new Date(r.createdAt)-new Date(o.createdAt):l.value==="rating-high-to-low"?o.rating-r.rating:l.value==="rating-low-to-high"?r.rating-o.rating:0),t=y(c,10);return e.jsxDEV(f,{className:"flex flex-1 flex-col gap-[26px]",children:[e.jsxDEV("div",{className:"flex w-full justify-end items-center",children:[e.jsxDEV("div",{className:"text-md font-medium flex gap-1 items-center",children:["Đánh giá:",e.jsxDEV("span",{className:"text-amber-400 text-lg",children:u},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:59,columnNumber:11},globalThis),"(",a,")"]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:57,columnNumber:9},globalThis),e.jsxDEV("div",{className:"flex",children:e.jsxDEV(k,{value:l,onChange:v,options:N,variant:"minimal"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:65,columnNumber:11},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:64,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:56,columnNumber:7},globalThis),e.jsxDEV("div",{className:"card !p-0 flex-1",children:[e.jsxDEV("span",{className:"block h-[1px] bg-input-border opacity-60"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:69,columnNumber:9},globalThis),e.jsxDEV("div",{children:[console.log("pagination.currentItems()",t.currentItems()),t.currentItems().length!==0?t.currentItems().map((r,o)=>e.jsxDEV(M,{data:{id:r._id,product:r.product_id,user:r.user_id,rating:r.rating,comment:r.comment,date:r.createdAt},index:o},`${l.value}-${r._id}`,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:72,columnNumber:102},globalThis)):e.jsxDEV(e.Fragment,{children:e.jsxDEV("p",{className:"text-center py-4 text-rose-500 text-2xl",children:"Chưa có đánh giá"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:79,columnNumber:34},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:79,columnNumber:32},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:70,columnNumber:9},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:68,columnNumber:7},globalThis),t.maxPage>1&&e.jsxDEV(C,{pagination:t},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:82,columnNumber:34},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/widgets/LatestAcceptedReviews.jsx",lineNumber:55,columnNumber:10},globalThis)},ee=()=>{const{slug:s}=x(),[a,u]=i.useState([]),[m,b]=i.useState([]),[p,l]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const r=s?"shop":"admin",o=s||"",n=await D();u(n);const g=await T(r,o);b(g)}catch(r){console.error("Failed to fetch reviews",r)}finally{l(!1)}})()},[s]);const v=i.useMemo(()=>a.length,[a]),c=i.useMemo(()=>{const t=m.reduce((o,n)=>o+n.rating*n.count,0),r=m.reduce((o,n)=>o+n.count,0);return r>0?(t/r).toFixed(1):"0.00"},[m]);return p?e.jsxDEV(W,{},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Reviews.jsx",lineNumber:38,columnNumber:12},globalThis):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(P,{title:"Đánh giá"},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Reviews.jsx",lineNumber:41,columnNumber:7},globalThis),e.jsxDEV("div",{className:"flex flex-col flex-1 gap-5 md:gap-[26px]",children:e.jsxDEV(Y,{reviews:a,totalCount:v,avgRating:c},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Reviews.jsx",lineNumber:43,columnNumber:9},globalThis)},void 0,!1,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Reviews.jsx",lineNumber:42,columnNumber:7},globalThis)]},void 0,!0,{fileName:"/Users/manh/WorkSpoce/Private/Ecommerce-Web/src/pages/Reviews.jsx",lineNumber:40,columnNumber:10},globalThis)};export{ee as default};
