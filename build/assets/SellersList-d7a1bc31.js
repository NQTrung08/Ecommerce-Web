import{j as e}from"./mui-a50be5b6.js";import{P}from"./PageHeader-2b351038.js";import{r as n,S as C,P as R}from"./antd-4509dcf0.js";import{S as _}from"./Spring-81dcc22e.js";import{N as E}from"./index-cacf817c.js";import{R as F}from"./RatingStars-a495c0a4.js";import{L}from"./LabeledProgressBar-7c59dd6a.js";import{C as g}from"./Counter-dfd40b33.js";import{n as y}from"./helpers-f9dc12f1.js";import{G as k}from"./shop-074a834f.js";import{s as z}from"./categorie-7552cc64.js";import{g as D}from"./review-704be748.js";import"./DocumentTitle-0f80adc2.js";import"./config-e16ab0ea.js";const $=({seller:s,index:o})=>{const l=t=>{const i=s.profit.reduce((x,d)=>x+d.totalRevenue,0);return i?t/i*100:0};console.log("getPercentage",s);const m=["accent","red","green","yellow","header"];return e.jsxs(_,{className:"card flex flex-col gap-5 md:gap-[26px] xl:flex-row xl:justify-between",index:o,children:[e.jsx("div",{className:"grid grid-cols-1  lg:gap-[26px]",children:e.jsxs("div",{className:"flex flex-col flex-1 gap-5 md:flex-row md:gap-[26px]",children:[e.jsxs("div",{className:"flex flex-col shrink-0 gap-5 md:w-[193px]",children:[e.jsx("div",{className:"img-wrapper h-[156px] flex justify-center items-center",children:e.jsx("img",{className:"max-w-[120px]",src:s.logo,alt:s.name})}),e.jsx(E,{className:"btn btn--primary",to:`/seller-profile/${s.id}`,children:"Hồ sơ"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"truncate max-w-[220px] xs:max-w-[260px] md:max-w-full xl:max-w-[218px]",children:s.name}),e.jsxs("div",{className:"flex flex-col items-start gap-2.5",children:[e.jsx("p",{className:"max-w-[220px]",children:s.address}),e.jsx("a",{className:"transition hover:text-accent",href:`tel:${s.phone}`,children:s.phone}),e.jsx("a",{className:"transition hover:text-accent",href:`mailto:${s.email}`,children:s.email})]})]})]})}),e.jsxs("div",{className:" flex flex-row gap-5",children:[s.profit.length!==0?e.jsxs("div",{className:"max-w-[400px] flex flex-col",children:[e.jsx("div",{className:"min-w-[400px]",children:e.jsx("h5",{className:"mb-2.5 xl:hidden 2xl:block",children:"Doanh thu ngành hàng:"})}),e.jsxs("div",{className:"flex flex-col max-w-[400px]",children:[e.jsx("h5",{className:"mb-2.5 hidden xl:block 2xl:hidden",children:"Doanh thu:"}),e.jsx("div",{className:"flex flex-col gap-4",children:s.profit.slice(0,4).map((t,i)=>e.jsx(L,{wrapperClass:"!gap-0",label:t.categoryName,value:l(t.totalRevenue|t.totalProducts),displayValue:y(t.totalRevenue|t.totalProducts,2),color:m[i]},t._id))})]})]}):e.jsx("div",{className:"w-[400px]"}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"w-[200px]",children:[e.jsx("h5",{className:"mb-2.5",children:"Thống kê:"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"badge-icon bg-green",children:e.jsx("i",{className:"icon-barcode"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(g,{className:"h3",num:s==null?void 0:s.totalOrdersEcommerce}),e.jsx("span",{className:"label-text",children:"Đơn hàng"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"badge-icon bg-accent",children:e.jsx("i",{className:"icon-diamond text-[23px] mt-1"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(g,{className:"h3",num:s.totalRevenueEcommerce,isFormatted:!0}),e.jsx("span",{className:"label-text",children:"Doanh thu"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"mb-2.5",children:"Đánh giá:"}),e.jsx(F,{rating:s.rating})]})]})]})]})},M=()=>{const[s,o]=n.useState([]),[l,m]=n.useState(1),[t,i]=n.useState(8),[x,d]=n.useState(!0);n.useEffect(()=>{(async()=>{try{const r=await k();if(!r||!r.shops){console.error("No shops data received");return}const u=await Promise.all(r.shops.map(a=>z(a._id))),N=await Promise.all(r.shops.map(a=>D(a._id))),v=r.shops.map((a,p)=>{const h=N[p],w=h.length?h.reduce((S,b)=>S+b.rating,0)/h.length:0;return{id:a._id,logo:a.logo,name:a.shop_name,website:a.website||"",address:a.address,phone:a.phone_number,email:`${a.owner_id.userName.toLowerCase().replace(/\s+/g,"")}@gmail.com`,rating:Math.floor(w),profit:u[p]||[],sales:Math.floor(Math.random()*1e5),totalOrdersEcommerce:a.order_count,totalRevenueEcommerce:a.total_revenue}});d(!1),o(v)}catch(r){console.error("Error fetching sellers or statistics:",r)}})()},[]);const f=(c,r)=>{m(c),i(r)},j=s.slice((l-1)*t,l*t);return e.jsx("div",{className:"seller-profiles-list",children:x?e.jsx("div",{className:"flex justify-center items-center h-[400px]",children:e.jsx(C,{size:"large"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col flex-1 gap-5 mb-[30px] md:gap-[26px]",children:j.map((c,r)=>e.jsx($,{seller:c,index:r},c.id))}),e.jsx(R,{current:l,pageSize:t,total:s.length,onChange:f,showSizeChanger:!0,pageSizeOptions:[8,12,20],className:"flex justify-center mt-5"})]})})},X=()=>e.jsxs(e.Fragment,{children:[e.jsx(P,{title:"Danh sách cửa hàng"}),e.jsx("div",{children:e.jsx(M,{})})]});export{X as default};
