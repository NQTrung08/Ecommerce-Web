import{P as ee,j as R}from"./mui-a50be5b6.js";import{D as ge}from"./DocumentTitle-0f80adc2.js";import{r as t,G as $,J as fe}from"./antd-4509dcf0.js";import{u as we,a as be,b as _e,c as ke,C as de,d as ue,s as ie,Q as me,L as ye,e as Ce}from"./index-cacf817c.js";import{S as xe}from"./Spring-81dcc22e.js";import{u as Se,C as je}from"./index.esm-b91f836f.js";import{a as Ee,U as Pe}from"./config-e16ab0ea.js";function D(){return(D=Object.assign||function(e){for(var c=1;c<arguments.length;c++){var s=arguments[c];for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(e[f]=s[f])}return e}).apply(this,arguments)}function pe(e,c){(c==null||c>e.length)&&(c=e.length);for(var s=0,f=new Array(c);s<c;s++)f[s]=e[s];return f}var ce=window;t.memo(function(e){var c=e.state,s=c===void 0?"":c,f=e.client_id,C=e.className,v=e.redirect_uri,g=e.scope,_=g===void 0?"profile":g,j=e.isOnlyGetToken,k=j!==void 0&&j,T=e.scope_data,x=T===void 0?{profile:{essential:!0}}:T,E=e.response_type,P=E===void 0?"token":E,w=e.children,i=e.onReject,d=e.onResolve,l=e.onLoginStart,u=t.useRef(null),h=t.useState(!1),L=h[0],p=h[1];t.useEffect(function(){!L&&r()},[L]),t.useEffect(function(){return function(){u.current&&u.current.remove()}},[]);var S=t.useCallback(function(){return!!document.getElementById("amazon-login")},[]),m=t.useCallback(function(b,N,K,H,I){N===void 0&&(N="script");var z=b.createElement(N);z.id=K,z.src=H,z.async=!0,z.defer=!0;var G=document.getElementsByTagName("script")[0];u.current=z,G&&G.parentNode&&G.parentNode.insertBefore(z,G),z.onload=I},[]),a=t.useCallback(function(b){try{return fetch("https://api.amazon.com/user/profile",{headers:{Authorization:"Bearer "+b.access_token}}).then(function(N){return N.json()}).then(function(N){d({provider:"amazon",data:D({},N,b)})}).catch(function(N){i(N)}).finally(function(){}),Promise.resolve()}catch(N){return Promise.reject(N)}},[i,d]),n=t.useCallback(function(b){k?d({provider:"amazon",data:D({},b)}):a(b)},[a,d,k]),o=t.useCallback(function(b){i(b)},[i]),r=t.useCallback(function(){S()?p(!0):m(document,"script","amazon-login","https://assets.loginwithamazon.com/sdk/na/login1.js",function(){ce.amazon.Login.setClientId(f),p(!0)})},[S,f,m]),y=t.useCallback(function(){L&&(ce.amazon?(l&&l(),ce.amazon.Login.authorize({scope:_,scope_data:x,response_type:P,redirect_uri:v,state:s},function(b){b.error?o(b.error):n(b)})):(r(),i("Google SDK isn't loaded!")))},[r,_,s,i,x,L,o,l,v,P,n]);return $.createElement("div",{className:C,onClick:y},w)});var se=window;t.memo(function(e){var c=e.appId,s=e.scope,f=s===void 0?"email,public_profile":s,C=e.state,v=C===void 0||C,g=e.xfbml,_=g===void 0||g,j=e.cookie,k=j===void 0||j,T=e.version,x=T===void 0?"v2.7":T,E=e.language,P=E===void 0?"en_EN":E,w=e.auth_type,i=w===void 0?"":w,d=e.className,l=e.onLoginStart,u=e.onReject,h=e.onResolve,L=e.redirect_uri,p=e.fieldsProfile,S=p===void 0?"id,first_name,last_name,middle_name,name,name_format,picture,short_name,email,gender":p,m=e.response_type,a=m===void 0?"code":m,n=e.return_scopes,o=n===void 0||n,r=e.isOnlyGetToken,y=r!==void 0&&r,b=e.children,N=t.useRef(null),K=t.useState(!1),H=K[0],I=K[1],z=t.useState(!1),G=z[0],A=z[1];t.useEffect(function(){!H&&Y()},[H]),t.useEffect(function(){return function(){N.current&&N.current.remove()}},[]);var U=t.useCallback(function(B,V){var J=B.createElement("script");J.id="facebook-jssdk",J.src="https://connect.facebook.net/en_EN/sdk.js";var O=B.getElementsByTagName("script")[0];O&&O.parentNode&&O.parentNode.insertBefore(J,O),V()},[]),W=t.useCallback(function(){return!!document.getElementById("facebook-jssdk")},[]),q=t.useCallback(function(B,V){var J=window;J.fbAsyncInit=function(){J.FB&&J.FB.init(D({},B)),I(!0);var O=V.getElementById("fb-root");O||((O=V.createElement("div")).id="fb-root",V.body.appendChild(O)),N.current=O}},[]),te=t.useCallback(function(B){se.FB.api("/me",{locale:P,fields:S},function(V){h({provider:"facebook",data:D({},B,V)})})},[S,P,h]),oe=t.useCallback(function(B){console.log("🚀 ~ file: index.tsx:127 ~ response:",B),B.authResponse?y?h({provider:"facebook",data:D({},B.authResponse)}):te(B.authResponse):u(B),A(!1)},[te,y,u,h]),Y=t.useCallback(function(){W()?I(!0):U(document,function(){q({appId:c,xfbml:_,version:x,state:v,cookie:k,redirect_uri:L,response_type:a},document)})},[v,c,_,k,x,q,L,a,U,W]),Z=t.useCallback(function(){H&&!G&&(se.FB?(A(!0),l&&l(),se.FB.login(oe,{scope:f,return_scopes:o,auth_type:i})):(Y(),u("Fb isn't loaded!"),A(!1)))},[Y,f,u,i,H,l,G,o,oe]);return $.createElement("div",{className:d,onClick:Z},b)});var M="875c0462-6309-4ddf-9889-5227b1acc82c",re=window;t.memo(function(e){var c=e.client_id,s=e.scope,f=s===void 0?"https://www.googleapis.com/auth/userinfo.profile":s,C=e.prompt,v=C===void 0?"select_account":C,g=e.typeResponse,_=g===void 0?"accessToken":g,j=e.ux_mode,k=e.className,T=k===void 0?"":k,x=e.login_hint,E=x===void 0?"":x,P=e.access_type,w=P===void 0?"online":P,i=e.onLoginStart,d=e.onReject,l=e.onResolve,u=e.redirect_uri,h=u===void 0?"/":u,L=e.auto_select,p=L!==void 0&&L,S=e.isOnlyGetToken,m=S!==void 0&&S,a=e.cookie_policy,n=a===void 0?"single_host_origin":a,o=e.hosted_domain,r=o===void 0?"":o,y=e.discoveryDocs,b=y===void 0?"":y,N=e.children,K=e.fetch_basic_profile,H=K===void 0||K,I=t.useRef(null),z=t.useState(!1),G=z[0],A=z[1],U=t.useState(null),W=U[0],q=U[1];t.useEffect(function(){!G&&V()},[G]),t.useEffect(function(){return function(){I.current&&I.current.remove()}},[]);var te=t.useCallback(function(){return!!document.getElementById("google-login")},[]),oe=t.useCallback(function(O,Q,F,ne,ve){Q===void 0&&(Q="script");var X=O.createElement(Q);X.id=F,X.src=ne,X.async=!0,X.defer=!0;var ae=document.getElementsByTagName("script")[0];I.current=X,ae&&ae.parentNode&&ae.parentNode.insertBefore(X,ae),X.onload=ve},[]),Y=t.useCallback(function(O){if(_==="accessToken"){var Q=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M,Authorization:"Bearer "+O.access_token});fetch("https://cors.bridged.cc/https://www.googleapis.com/oauth2/v3/userinfo?alt=json",{method:"GET",headers:Q}).then(function(F){return F.json()}).then(function(F){var ne=D({},O,F);l({provider:"google",data:ne})}).catch(function(F){d(F)})}else fetch("https://www.googleapis.com/oauth2/v3/tokeninfo?id_token="+O.credential,{method:"GET"}).then(function(F){return F.json()}).then(function(F){var ne=D({},O,F);l({provider:"google",data:ne})}).catch(function(F){d(F)})},[_,d,l]),Z=t.useCallback(function(O){O&&w==="offline"||m?l({provider:"google",data:O}):Y(O)},[w,m,Y,l]),B=t.useCallback(function(O){d({provider:"google",data:O})},[d]),V=t.useCallback(function(){te()?A(!0):oe(document,"script","google-login","https://accounts.google.com/gsi/client",function(){var O={client_id:c,ux_mode:j},Q=null;if(_==="idToken")re.google.accounts.id.initialize(D({},O,{auto_select:p,prompt:"select_account",login_uri:h,callback:Z,native_callback:Z,error_callback:B}));else{var F=D({},O,{scope:f,prompt:v,login_hint:E,access_type:w,hosted_domain:r,redirect_uri:h,cookie_policy:n,discoveryDocs:b,immediate:!0,fetch_basic_profile:H,callback:Z,error_callback:B});Q=w==="offline"?re.google.accounts.oauth2.initCodeClient(F):re.google.accounts.oauth2.initTokenClient(F)}Q&&q(Q),A(!0)})},[f,v,j,c,E,p,w,h,_,b,n,r,Z,B,H,oe,te]),J=t.useCallback(function(){G&&(re.google?(i&&i(),W?w==="offline"?W.requestCode():W.requestAccessToken():re.google.accounts.id.prompt()):(V(),d("Google SDK isn't loaded!")))},[w,W,G,V,i,d]);return $.createElement("div",{className:T,onClick:J},N)});t.memo(function(e){var c=e.state,s=c===void 0?"":c,f=e.scope,C=f===void 0?"repo,gist":f,v=e.client_id,g=e.client_secret,_=e.className,j=_===void 0?"":_,k=e.redirect_uri,T=e.allow_signup,x=T!==void 0&&T,E=e.isOnlyGetToken,P=E!==void 0&&E,w=e.isOnlyGetCode,i=w!==void 0&&w,d=e.children,l=e.onReject,u=e.onResolve,h=e.onLoginStart;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_github")&&o&&(localStorage.setItem("github",o),window.close())},[]);var L=t.useCallback(function(n){fetch("https://cors.bridged.cc/https://api.github.com//user",{method:"GET",headers:{Authorization:"token "+n.access_token,"x-cors-grida-api-key":M}}).then(function(o){return o.json()}).then(function(o){u({provider:"github",data:D({},o,n)})}).catch(function(o){l(o)})},[l,u]),p=t.useCallback(function(n){if(i)u({provider:"github",data:{code:n}});else{var o={code:n,state:s,redirect_uri:k,client_id:v,client_secret:g},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M});fetch("https://cors.bridged.cc/https://github.com/login/oauth/access_token",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(y){return y.text()}).then(function(y){for(var b,N={},K=function(I,z){var G;if(typeof Symbol>"u"||I[Symbol.iterator]==null){if(Array.isArray(I)||(G=function(U,W){if(U){if(typeof U=="string")return pe(U,void 0);var q=Object.prototype.toString.call(U).slice(8,-1);return q==="Object"&&U.constructor&&(q=U.constructor.name),q==="Map"||q==="Set"?Array.from(U):q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q)?pe(U,void 0):void 0}}(I))){G&&(I=G);var A=0;return function(){return A>=I.length?{done:!0}:{done:!1,value:I[A++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(G=I[Symbol.iterator]()).next.bind(G)}(new URLSearchParams(y));!(b=K()).done;){var H=b.value;N[H[0]]=H[1]}N.access_token?P?u({provider:"github",data:N}):L(N):l("no data")}).catch(function(y){l(y)})}},[s,l,L,u,v,k,g,i,P]),S=t.useCallback(function(n){var o=n.type,r=n.code,y=n.provider;try{return Promise.resolve(o==="code"&&y==="github"&&r&&p(r))}catch(b){return Promise.reject(b)}},[p]),m=t.useCallback(function(){window.removeEventListener("storage",m,!1);var n=localStorage.getItem("github");n&&(S({provider:"github",type:"code",code:n}),localStorage.removeItem("github"))},[S]),a=t.useCallback(function(){h&&h(),window.addEventListener("storage",m,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://github.com/login/oauth/authorize?client_id="+v+"&scope="+C+"&state="+s+"_github&redirect_uri="+k+"&allow_signup="+x,"Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[C,s,v,k,x,h,m]);return $.createElement("div",{className:j,onClick:a},d)});t.memo(function(e){var c=e.state,s=c===void 0?"":c,f=e.client_id,C=e.client_secret,v=e.className,g=e.redirect_uri,_=e.fields,j=_===void 0?"id,username,account_type,media_count":_,k=e.scope,T=k===void 0?"user_profile,user_media":k,x=e.response_type,E=x===void 0?"code":x,P=e.isOnlyGetCode,w=P!==void 0&&P,i=e.isOnlyGetToken,d=i!==void 0&&i,l=e.children,u=e.onReject,h=e.onResolve,L=e.onLoginStart;t.useEffect(function(){var o=new URL(window.location.href),r=o.searchParams.get("code"),y=o.searchParams.get("state");y!=null&&y.includes("_instagram")&&r&&(localStorage.setItem("instagram",r),window.close())},[]);var p=t.useCallback(function(o){fetch("https://cors.bridged.cc/https://graph.instagram.com//me?fields="+j+"&access_token="+o.access_token,{method:"GET",headers:{"x-cors-grida-api-key":M}}).then(function(r){return r.json()}).then(function(r){h({provider:"instagram",data:D({},r,o)})}).catch(function(r){u(r)})},[j,u,h]),S=t.useCallback(function(o){if(w)h({provider:"instagram",data:{code:o}});else{var r={grant_type:"authorization_code",code:o,redirect_uri:g,client_id:f,client_secret:C},y=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M});fetch("https://cors.bridged.cc/https://api.instagram.com/oauth/access_token",{method:"POST",headers:y,body:new URLSearchParams(r)}).then(function(b){return b.json()}).then(function(b){b.access_token?d?h({provider:"instagram",data:b}):p(b):u("no data")}).catch(function(b){u(b)}).finally(function(){})}},[u,h,p,f,g,C,w,d]),m=t.useCallback(function(o){var r=o.type,y=o.code,b=o.provider;try{return Promise.resolve(r==="code"&&b==="instagram"&&y&&S(y))}catch(N){return Promise.reject(N)}},[S]),a=t.useCallback(function(){window.removeEventListener("storage",a,!1);var o=localStorage.getItem("instagram");o&&(m({provider:"instagram",type:"code",code:o}),localStorage.removeItem("instagram"))},[m]),n=t.useCallback(function(){L&&L(),window.addEventListener("storage",a,!1);var o=window.screen.width/2-225,r=window.screen.height/2-365;window.open("https://api.instagram.com/oauth/authorize?response_type="+E+"&client_id="+f+"&scope="+T+"&state="+s+"_instagram&redirect_uri="+g,"Instagram","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+r+", left="+o)},[T,s,f,g,L,E,a]);return $.createElement("div",{className:v,onClick:n},l)});t.memo(function(e){var c=e.tenant,s=c===void 0?"common":c,f=e.state,C=f===void 0?"":f,v=e.client_id,g=e.className,_=e.redirect_uri,j=e.scope,k=j===void 0?"profile openid email":j,T=e.response_type,x=T===void 0?"code":T,E=e.response_mode,P=E===void 0?"query":E,w=e.children,i=e.code_challenge,d=i===void 0?"19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9":i,l=e.code_challenge_method,u=l===void 0?"plain":l,h=e.prompt,L=h===void 0?"select_account":h,p=e.isOnlyGetCode,S=p!==void 0&&p,m=e.isOnlyGetToken,a=m!==void 0&&m,n=e.onLoginStart,o=e.onReject,r=e.onResolve;t.useEffect(function(){var I=new URL(window.location.href),z=I.searchParams.get("code"),G=I.searchParams.get("state");G!=null&&G.includes("_microsoft")&&z&&(localStorage.setItem("microsoft",z),window.close())},[]);var y=t.useCallback(function(I){fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{Authorization:"Bearer "+I.access_token}}).then(function(z){return z.json()}).then(function(z){r({provider:"microsoft",data:D({},z,I)})}).catch(function(z){o(z)})},[o,r]),b=t.useCallback(function(I){if(S)r({provider:"microsoft",data:{code:I}});else{var z={code:I,scope:k,client_id:v,redirect_uri:_,code_verifier:d,grant_type:"authorization_code"},G=new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});fetch("https://login.microsoftonline.com/"+s+"/oauth2/v2.0/token",{method:"POST",headers:G,body:new URLSearchParams(z)}).then(function(A){return A.json()}).then(function(A){A.access_token?a?r({provider:"microsoft",data:A}):y(A):o("no data")}).catch(function(A){o(A)})}},[k,s,o,y,v,r,_,d,S,a]),N=t.useCallback(function(I){var z=I.type,G=I.code,A=I.provider;try{return Promise.resolve(z==="code"&&A==="microsoft"&&G&&b(G))}catch(U){return Promise.reject(U)}},[b]),K=t.useCallback(function(){window.removeEventListener("storage",K,!1);var I=localStorage.getItem("microsoft");I&&(N({provider:"microsoft",type:"code",code:I}),localStorage.removeItem("microsoft"))},[N]),H=t.useCallback(function(){n&&n(),window.addEventListener("storage",K,!1);var I=window.screen.width/2-225,z=window.screen.height/2-365;window.open("https://login.microsoftonline.com/"+s+"/oauth2/v2.0/authorize?client_id="+v+`
        &response_type=`+x+`
        &redirect_uri=`+_+`
        &response_mode=`+P+`
        &scope=`+k+`
        &state=`+C+`_microsoft
        &prompt=`+L+`
        &code_challenge=`+d+`
        &code_challenge_method=`+u,"Microsoft","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+z+", left="+I)},[k,C,L,s,v,n,_,P,x,d,K,u]);return $.createElement("div",{className:g,onClick:H},w)});t.memo(function(e){var c=e.state,s=c===void 0?"":c,f=e.scope,C=f===void 0?"r_liteprofile":f,v=e.client_id,g=e.client_secret,_=e.className,j=_===void 0?"":_,k=e.redirect_uri,T=e.response_type,x=T===void 0?"code":T,E=e.isOnlyGetCode,P=E!==void 0&&E,w=e.isOnlyGetToken,i=w!==void 0&&w,d=e.children,l=e.onLoginStart,u=e.onReject,h=e.onResolve;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_linkedin")&&o&&(localStorage.setItem("linkedin",o),window.close())},[]);var L=t.useCallback(function(n){fetch("https://api.allorigins.win/get?url="+encodeURIComponent("https://api.linkedin.com/v2/me?oauth2_access_token="+n.access_token+"&projection=(id,profilePicture(displayImage~digitalmediaAsset:playableStreams),localizedLastName, firstName,lastName,localizedFirstName)"),{method:"GET"}).then(function(o){return o.json()}).then(function(o){var r=D({},n);if(o.contents){var y=JSON.parse(o.contents);typeof n=="object"&&Object.entries(y).map(function(b){r[b[0]]=b[1]})}h({provider:"linkedin",data:r})}).catch(function(o){u(o)})},[u,h]),p=t.useCallback(function(n){if(P)h({provider:"linkedin",data:{code:n}});else{var o={code:n,grant_type:"authorization_code",redirect_uri:k,client_id:v,client_secret:g},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M});fetch("https://cors.bridged.cc/https://www.linkedin.com/oauth/v2/accessToken",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(y){return y.json()}).then(function(y){i?h({provider:"linkedin",data:y}):L(y)}).catch(function(y){u(y)})}},[u,h,v,L,k,g,P,i]),S=t.useCallback(function(n){var o=n.type,r=n.code,y=n.provider;try{return Promise.resolve(o==="code"&&y==="linkedin"&&r&&p(r))}catch(b){return Promise.reject(b)}},[p]),m=t.useCallback(function(){window.removeEventListener("storage",m,!1);var n=localStorage.getItem("linkedin");n&&(S({provider:"linkedin",type:"code",code:n}),localStorage.removeItem("linkedin"))},[S]),a=t.useCallback(function(){l&&l(),window.addEventListener("storage",m,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://www.linkedin.com/oauth/v2/authorization?response_type="+x+"&client_id="+v+"&scope="+C+"&state="+s+"_linkedin&redirect_uri="+k,"Linkedin","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[l,m,x,v,C,s,k]);return $.createElement("div",{className:j,onClick:a},d)});t.memo(function(e){var c=e.state,s=c===void 0?"":c,f=e.scope,C=f===void 0?"boards:read,pins:read,user_accounts:read":f,v=e.client_id,g=e.client_secret,_=e.className,j=_===void 0?"":_,k=e.redirect_uri,T=e.isOnlyGetCode,x=T!==void 0&&T,E=e.isOnlyGetToken,P=E!==void 0&&E,w=e.children,i=e.onLoginStart,d=e.onReject,l=e.onResolve;t.useEffect(function(){var m=new URL(window.location.href),a=m.searchParams.get("code"),n=m.searchParams.get("state");n!=null&&n.includes("_pinterest")&&a&&(localStorage.setItem("pinterest",a),window.close())},[]);var u=t.useCallback(function(m){fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/user_account",{method:"GET",headers:{Authorization:"Bearer "+m.access_token,"x-cors-grida-api-key":M}}).then(function(a){return a.json()}).then(function(a){l({provider:"pinterest",data:D({},m,a)})}).catch(function(a){return d(a)})},[d,l]),h=t.useCallback(function(m){try{var a=function(){if(!x){var n={code:m,redirect_uri:k,grant_type:"authorization_code"},o=[];for(var r in n){var y=encodeURIComponent(r),b=encodeURIComponent(n[r]);o.push(y+"="+b)}return o=o.join("&"),Promise.resolve(fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/oauth/token",{method:"POST",headers:{Authorization:"Basic "+btoa(v+":"+g),"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M},body:o}).then(function(N){return N.json()}).catch(function(N){return d(N)})).then(function(N){N.access_token&&(P?l({provider:"pinterest",data:N}):u(N))})}l({provider:"pinterest",data:{code:m}})}();return Promise.resolve(a&&a.then?a.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},[d,v,u,l,k,g,x,P]),L=t.useCallback(function(m){var a=m.type,n=m.code,o=m.provider;try{return Promise.resolve(a==="code"&&o==="pinterest"&&n&&h(n))}catch(r){return Promise.reject(r)}},[h]),p=t.useCallback(function(){window.removeEventListener("storage",p,!1);var m=localStorage.getItem("pinterest");m&&(L({provider:"pinterest",type:"code",code:m}),localStorage.removeItem("pinterest"))},[L]),S=t.useCallback(function(){i&&i(),window.addEventListener("storage",p,!1);var m=window.screen.width/2-225,a=window.screen.height/2-365;window.open("https://www.pinterest.com/oauth/?client_id="+v+"&scope="+C+"&state="+s+"_pinterest&redirect_uri="+k+"&response_type=code","Pinterest","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+a+", left="+m)},[C,s,v,k,i,p]);return $.createElement("div",{className:j,onClick:S},w)});t.memo(function(e){var c=e.client_id,s=e.className,f=s===void 0?"":s,C=e.redirect_uri,v=e.children,g=e.fields,_=g===void 0?"created_at,description,entities,id,location,name,pinned_tweet_id,profile_image_url,protected,public_metrics,url,username,verified,withheld":g,j=e.state,k=j===void 0?"state":j,T=e.scope,x=T===void 0?"users.read%20tweet.read":T,E=e.isOnlyGetCode,P=E!==void 0&&E,w=e.isOnlyGetToken,i=w!==void 0&&w,d=e.onLoginStart,l=e.onReject,u=e.onResolve;t.useEffect(function(){var a=new URL(window.location.href),n=a.searchParams.get("code");a.searchParams.get("state")&&n&&(localStorage.setItem("twitter",""+n),window.close())},[]);var h=t.useCallback(function(a){fetch("https://cors.bridged.cc/https://api.twitter.com/2/users/me?user.fields="+_,{method:"GET",headers:{Authorization:"Bearer "+a.access_token,"x-cors-grida-api-key":M}}).then(function(n){return n.json()}).then(function(n){u({provider:"twitter",data:D({},a,n.data)})}).catch(function(n){return l(n)})},[_,l,u]),L=t.useCallback(function(a){try{var n=function(){if(!P){var o=new URLSearchParams({code:a,redirect_uri:C,client_id:c,grant_type:"authorization_code",code_verifier:"challenge"});return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/2/oauth2/token",{method:"POST",body:o,headers:{"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":M}}).then(function(r){return r.json()}).catch(function(r){return l(r)})).then(function(r){r.access_token&&(i?u({provider:"twitter",data:r}):h(r))})}u({provider:"twitter",data:{code:a}})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(o){return Promise.reject(o)}},[l,h,u,c,C,P,i]),p=t.useCallback(function(a){var n=a.type,o=a.code,r=a.provider;try{return Promise.resolve(n==="code"&&r==="twitter"&&o&&L(o))}catch(y){return Promise.reject(y)}},[L]),S=t.useCallback(function(){window.removeEventListener("storage",S,!1);var a=localStorage.getItem("twitter");a&&(p({provider:"twitter",type:"code",code:a}),localStorage.removeItem("twitter"))},[p]),m=t.useCallback(function(){try{d&&d(),window.addEventListener("storage",S,!1);var a=window.screen.width/2-225,n=window.screen.height/2-365;return window.open("https://twitter.com/i/oauth2/authorize?response_type=code&client_id="+c+"&redirect_uri="+C+"&scope="+x+"&state="+k+"&code_challenge=challenge&code_challenge_method=plain","twitter","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+n+", left="+a),Promise.resolve()}catch(o){return Promise.reject(o)}},[x,k,c,d,C,S]);return $.createElement("div",{className:f,onClick:m},v)});typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var le=window;t.memo(function(e){var c=e.client_id,s=e.scope,f=s===void 0?"name email":s,C=e.className,v=C===void 0?"":C,g=e.onLoginStart,_=e.onReject,j=e.onResolve,k=e.redirect_uri,T=k===void 0?"/":k,x=e.children,E=t.useRef(null),P=t.useState(!1),w=P[0],i=P[1];t.useEffect(function(){!w&&h()},[w]),t.useEffect(function(){return function(){E.current&&E.current.remove()}},[]);var d=t.useCallback(function(){return!!document.getElementById("apple-login")},[]),l=t.useCallback(function(p,S,m,a,n){S===void 0&&(S="script");var o=p.createElement(S);o.id=m,o.src=a,o.async=!0,o.defer=!0;var r=document.getElementsByTagName("script")[0];E.current=o,r&&r.parentNode&&r.parentNode.insertBefore(o,r),o.onload=n},[]),u=t.useCallback(function(p){j({provider:"apple",data:p})},[j]),h=t.useCallback(function(){d()?i(!0):l(document,"script","apple-login","https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",function(){le.AppleID.auth.init({clientId:c,scope:f,redirectURI:T,state:"origin:web",usePopup:!0}),i(!0)})},[f,c,T,l,d]),L=t.useCallback(function(){try{if(!w)return Promise.resolve();var p=function(){if(le.AppleID){g&&g();var S=function(m,a){try{var n=Promise.resolve(le.AppleID.auth.signIn()).then(function(o){u(o)})}catch(o){return a(o)}return n&&n.then?n.then(void 0,a):n}(0,function(m){_({err:m})});if(S&&S.then)return S.then(function(){})}else h(),_("Apple SDK isn't loaded!")}();return Promise.resolve(p&&p.then?p.then(function(){}):void 0)}catch(S){return Promise.reject(S)}},[u,w,h,g,_]);return $.createElement("div",{className:v,onClick:L},x)});t.memo(function(e){var c=e.state,s=c===void 0?"":c,f=e.scope,C=f===void 0?"user.info.basic":f,v=e.client_key,g=e.className,_=g===void 0?"":g,j=e.redirect_uri,k=e.children,T=e.onResolve,x=e.onLoginStart;t.useEffect(function(){var i=new URL(window.location.href),d=i.searchParams.get("code"),l=i.searchParams.get("state");l!=null&&l.includes("_tiktok")&&d&&(localStorage.setItem("tiktok",d),window.close())},[]);var E=t.useCallback(function(i){var d=i.type,l=i.code,u=i.provider;try{return Promise.resolve(d==="code"&&u==="tiktok"&&l&&T({provider:"tiktok",data:{code:l}}))}catch(h){return Promise.reject(h)}},[T]),P=t.useCallback(function(){window.removeEventListener("storage",P,!1);var i=localStorage.getItem("tiktok");i&&(E({provider:"tiktok",type:"code",code:i}),localStorage.removeItem("instagram"))},[E]),w=t.useCallback(function(){x&&x(),window.addEventListener("storage",P,!1);var i=window.screen.width/2-225,d=window.screen.height/2-365;window.open("https://www.tiktok.com/auth/authorize?client_key="+v+"&scope="+C+"&state="+s+"_tiktok&redirect_uri="+j+"&response_type=code","Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+d+", left="+i)},[C,s,v,j,x,P]);return $.createElement("div",{className:_,onClick:w},k)});const he=({innerRef:e,id:c,label:s="Password",isInvalid:f,...C})=>{const[v,g]=t.useState(!1),_=j=>{j.preventDefault(),g(!v)};return t.useEffect(()=>{C.value===""&&g(!1)},[C.value]),R.jsxs("div",{className:"field-wrapper",children:[R.jsx("label",{className:"field-label",htmlFor:c,children:s}),R.jsxs("div",{className:"relative",children:[R.jsx("input",{className:fe("field-input !pr-10",{"field-input--error":f}),id:c,type:v?"text":"password",ref:e,...C}),R.jsx("button",{className:"field-btn",onClick:_,"aria-label":"Toggle password visibility",children:R.jsx("i",{className:`icon icon-eye${v?"-slash-regular":"-regular"}`})})]})]})};he.propTypes={innerRef:ee.func,id:ee.string.isRequired,label:ee.string,isInvalid:ee.oneOfType([ee.bool,ee.object])};const Ne="/assets/login-33fdac8a.webp",Le=async(e,c)=>{try{return await Ee.post(`${Pe}/signin`,{email:e,password:c})}catch{throw new Error("Failed to sign in")}},Ie=()=>{const{width:e}=we(),[c,s]=t.useState(!1),[f,C]=t.useState(!1),v=3,g=be(),_=_e(),j=ke(),{register:k,handleSubmit:T,formState:{errors:x},control:E}=Se({defaultValues:{email:"",password:""}});t.useEffect(()=>{const i=new URLSearchParams(_.search).get("access_token");i?(g(de(!0)),g(ue(i)),ie("token",i,v),ie("user_login",i),j("/")):c&&(me.error("Không thể đăng nhập bằng Google!"),s(!1))},[_.search,c,g,j]);const P=async w=>{var i,d,l,u,h,L;C(!0);try{const p=await Le(w.email,w.password);g(de(!0)),g(ue((d=(i=p==null?void 0:p.data)==null?void 0:i.metadata)==null?void 0:d.tokens.accessToken)),ie("token",(u=(l=p==null?void 0:p.data)==null?void 0:l.metadata)==null?void 0:u.tokens.accessToken,v),ie("user_login",(L=(h=p==null?void 0:p.data)==null?void 0:h.metadata)==null?void 0:L.tokens.accessToken),j("/")}catch{me.error("Đăng nhập thất bại! Vui lòng kiểm tra lại thông tin.")}finally{C(!1)}};return f?R.jsx(ye,{}):R.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 4xl:grid-cols-[minmax(0,_1030px)_minmax(0,_1fr)]",children:[e>=1024&&R.jsxs("div",{className:"flex flex-col justify-center items-center lg:p-[60px]",children:[R.jsx(Ce,{imgClass:"w-[60px]",textClass:"text-[28px]"}),R.jsx("p",{className:"text-center tracking-[0.2px] font-semibold text-lg leading-6 max-w-[540px] my-7 mx-auto",children:"Khám phá xu hướng, theo dõi đơn hàng của bạn một cách dễ dàng và nâng cao trải nghiệm mua sắm của bạn."}),R.jsx("img",{className:"max-w-[780px]",src:Ne,alt:"media"})]}),R.jsx("div",{className:"bg-widget flex items-center justify-center w-full py-10 px-4 lg:p-[60px]",children:R.jsxs(xe,{className:"max-w-[460px] w-full",type:"slideUp",duration:400,delay:300,children:[R.jsxs("div",{className:"flex flex-col gap-2.5 text-center",children:[R.jsx("h1",{children:"Chào mừng trở lại!"}),R.jsx("p",{className:"lg:max-w-[300px] m-auto 4xl:max-w-[unset]",children:"Khám phá các sản phẩm mới nhất của chúng tôi và tận hưởng trải nghiệm mua sắm của bạn."})]}),R.jsxs("form",{className:"mt-5",onSubmit:T(P),children:[R.jsxs("div",{className:"flex flex-col gap-5",children:[R.jsxs("div",{className:"field-wrapper",children:[R.jsx("label",{htmlFor:"email",className:"field-label",children:"E-mail"}),R.jsx("input",{className:fe("field-input",{"field-input--error":x.email}),id:"email",type:"text",placeholder:"Địa chỉ E-mail của bạn",...k("email",{required:!0,pattern:/^\S+@\S+$/i})})]}),R.jsx(je,{name:"password",control:E,rules:{required:!0},render:({field:w})=>R.jsx(he,{id:"password",placeholder:"Mật khẩu của bạn",error:x.password,innerRef:w.ref,isInvalid:x.password,value:w.value,onChange:w.onChange})})]}),R.jsx("div",{className:"flex flex-col items-center gap-6 mt-4 mb-10",children:R.jsx("button",{className:"btn btn--primary w-full",type:"submit",disabled:f,children:"Đăng Nhập"})})]})]})})]})},Be=()=>R.jsxs(R.Fragment,{children:[R.jsx(ge,{title:"Login"}),R.jsx(Ie,{})]});export{Be as default};
