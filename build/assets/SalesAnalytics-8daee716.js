import{j as e}from"./mui-a50be5b6.js";import{r,L as F}from"./antd-4509dcf0.js";import"./PageHeader-2b351038.js";import{S as E}from"./Spring-81dcc22e.js";import{u as z,S as G}from"./useSubmenu-16fa5409.js";import{f as R,l as I,g as X,u as q,L as H}from"./index-cacf817c.js";import{n as y}from"./helpers-f9dc12f1.js";import{R as J,B as Q,C as D,X as S,Y as w,T as L,a as U,L as V,b as Z,A as _,c as ee}from"./recharts-19f32df2.js";import{g as ae}from"./statistic-cd42dafa.js";import{h as b}from"./moment-a9aaa855.js";import"./DocumentTitle-0f80adc2.js";import"./config-e16ab0ea.js";const se=({totalRevenueEcommerce:n,totalOrdersEcommerce:o})=>{const{theme:l}=R(),{anchorEl:h,open:s,handleClick:d,handleClose:c}=z();return e.jsxs(E,{className:"card flex flex-col gap-4 md:flex-row md:gap-[26px] lg:col-span-3 xl:col-span-2 2xl:col-span-1",children:[e.jsxs("div",{className:"h-[230px] rounded-md bg-body border border-input-border p-5 flex flex-col items-center justify-center gap-6 shrink-0 md:w-[190px]",children:[e.jsx("img",{className:"h-20 w-auto ml-2.5",src:l==="light"?I:X,alt:"ShopPoint"}),e.jsx("span",{className:"font-heading font-bold text-xl leading-[1.1] text-header",children:"ShopPoint"})]}),e.jsxs("div",{className:"flex flex-1 flex-col gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{children:"ShopPoint - Bán lẻ"}),e.jsx("p",{children:"Khám phá các sản phẩm đa dạng, từ những mặt hàng thiết yếu đến những xu hướng mới nhất. Chúng tôi luôn đồng hành cùng bạn, giúp việc mua sắm trở nên dễ dàng và thuận tiện hơn bao giờ hết."})]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center gap-4"}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 gap-6 md:grid-cols-2 lg:flex justify-between xl:max-w-[670px]",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx("div",{className:"badge-icon bg-green",children:e.jsx("i",{className:"icon-diamond text-[23px] mt-1"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-heading font-semibold leading-[1.1] text-header text-[26px] md:text-[32px]",children:n||"0"}),e.jsx("span",{className:"label-text mb-2",children:"Doanh thu"})]})]}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx("div",{className:"badge-icon bg-accent",children:e.jsx("i",{className:"icon-barcode"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-heading font-semibold leading-[1.1] text-header text-[26px] md:text-[32px]",children:o||"0"}),e.jsx("span",{className:"label-text mb-2",children:"Đơn hàng mới"})]})]})]})]})]}),e.jsx(G,{anchorEl:h,open:s,onClose:c,children:e.jsxs("div",{className:"flex flex-col items-start gap-5 p-5",children:[e.jsxs("button",{className:"menu-btn subheading-2",children:[e.jsx("span",{className:"icon-wrapper",children:e.jsx("i",{className:"icon icon-link-solid"})}),"Liên hệ"]}),e.jsxs("button",{className:"menu-btn subheading-2",children:[e.jsx("span",{className:"icon-wrapper",children:e.jsx("i",{className:"icon icon-share-solid"})}),"Chia sẻ"]})]})})]})},T=({active:n,payload:o,label:l})=>n&&o&&o.length?e.jsxs("div",{className:"chart-tooltip p-4",children:[e.jsx("h6",{className:"mb-1",children:l}),e.jsx("div",{className:"flex flex-col",children:o.map((h,s)=>e.jsx("div",{className:"flex gap-1.5",children:e.jsx("span",{className:"h6 !text-sm",children:y(h.value,1)})},s))})]}):null,O=({data:n,title:o,color:l})=>{const{theme:h}=R(),{width:s}=q(),d=h==="light"?"var(--header)":"#C4DEFF",c=h==="light"?"var(--input-border)":"#8D8D99",[m,N]=r.useState("BarChart");console.log("data",n);const k=x=>{N(x.target.value)};return e.jsxs(E,{className:"card w-full flex flex-col h-[300px] md:h-[494px] lg:col-span-3 xl:col-span-1",children:[e.jsxs("div",{className:"flex flex-col gap-2.5 mb-5 md:flex-row md:justify-between md:items-center",children:[e.jsxs("select",{className:"p-2 border rounded-md font-heading font-semibold text-sm text-header text-black",value:m,onChange:k,children:[e.jsx("option",{className:"text-black",value:"BarChart",children:"Bar Chart"}),e.jsx("option",{className:"text-black",value:"LineChart",children:"Line Chart"}),e.jsx("option",{className:"text-black",value:"AreaChart",children:"Area Chart"})]}),e.jsx("div",{className:"flex items-center gap-5",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("span",{className:"w-4 h-4 rounded-full",style:{background:l?c:d}}),e.jsx("span",{className:"font-heading font-semibold text-sm text-header",children:o})]})})]}),e.jsx("div",{className:"flex-1",children:e.jsxs(J,{width:"100%",height:"100%",children:[m==="BarChart"&&e.jsxs(Q,{data:n,margin:!1,children:[e.jsx(D,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--input-border)",strokeOpacity:.6}),e.jsx(S,{dataKey:"name",tickLine:!1,axisLine:!1,dy:9,hide:s<768,tick:{fontSize:10,fontFamily:"var(--heading-font)",fontWeight:700,fill:"var(--header)"}}),e.jsx(w,{tickLine:!1,axisLine:!1,tickFormatter:x=>y(x,0),tick:{fill:"var(--header)"},hide:s<768}),e.jsx(L,{cursor:!1,content:e.jsx(T,{})}),e.jsx(U,{dataKey:"revenue",fill:l?c:d,maxBarSize:16,radius:10})]}),m==="LineChart"&&e.jsxs(V,{data:n,margin:!1,children:[e.jsx(D,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--input-border)",strokeOpacity:.6}),e.jsx(S,{dataKey:"name",tickLine:!1,axisLine:!1,dy:9,hide:s<768,tick:{fontSize:10,fontFamily:"var(--heading-font)",fontWeight:700,fill:"var(--header)"}}),e.jsx(w,{tickLine:!1,axisLine:!1,tickFormatter:x=>y(x,0),tick:{fill:"var(--header)"},hide:s<768}),e.jsx(L,{cursor:!1,content:e.jsx(T,{})}),e.jsx(Z,{type:"monotone",dataKey:"revenue",stroke:l?c:d,strokeWidth:2,dot:!1})]}),m==="AreaChart"&&e.jsxs(_,{data:n,margin:!1,children:[e.jsx(D,{strokeDasharray:"3 3",vertical:!1,stroke:"var(--input-border)",strokeOpacity:.6}),e.jsx(S,{dataKey:"name",tickLine:!1,axisLine:!1,dy:9,hide:s<768,tick:{fontSize:10,fontFamily:"var(--heading-font)",fontWeight:700,fill:"var(--header)"}}),e.jsx(w,{tickLine:!1,axisLine:!1,tickFormatter:x=>y(x,0),tick:{fill:"var(--header)"},hide:s<768}),e.jsx(L,{cursor:!1,content:e.jsx(T,{})}),e.jsx(ee,{type:"monotone",dataKey:"revenue",fill:l?c:d,stroke:l?c:d,strokeWidth:2})]})]})})]})},ue=()=>{const[n,o]=r.useState(null),[l,h]=r.useState(null),[s,d]=r.useState(!0),[c,m]=r.useState(null),[N,k]=r.useState([]),[x,A]=r.useState([]),[f,M]=r.useState(b().startOf("year")),[u,K]=r.useState(b().endOf("year")),[i,Y]=r.useState("month");let p=null;const $=(t,g)=>{const j=b(t,"DD-MM-YYYY"),v=b(g,"DD-MM-YYYY").diff(j,"days");return v<=30?"day":v<=365?"month":"year"};r.useEffect(()=>{Y($(f,u))},[f,u]);const P=async()=>{try{d(!0);const t=await ae({startDate:f,endDate:u,groupBy:i}),g=t.map(a=>({name:i==="month"?`${a.month}`:i==="year"?`${a.year}`:i==="day"?`${a.day}`:a.date,revenue:a.totalRevenue})),j=t.map(a=>({name:i==="month"?`${a.month}`:i==="year"?`${a.year}`:i==="day"?`${a.day}`:a.date,revenue:a.totalOrders})),B=g.reduce((a,C)=>a+C.revenue,0),v=j.reduce((a,C)=>a+C.revenue,0);o(B),h(v),console.log("groupBy",i),k(g),A(j)}catch(t){console.error("Failed to fetch revenue data:",t),m("Failed to fetch revenue data. Please try again.")}finally{d(!1)}},W=t=>{Y(t.target.value)};return r.useEffect(()=>(p&&clearTimeout(p),p=setTimeout(()=>{P()},1e3),()=>clearTimeout(p)),[f,u,i]),s?e.jsx(H,{}):c?e.jsx("div",{className:"text-rose-500",children:c}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(se,{totalRevenueEcommerce:n,totalOrdersEcommerce:l}),e.jsxs("div",{className:`grid grid-cols-3 gap-6 p-4 card no-hover flex-col mb-5 md:mb-[26px] md:!p-[26px] lg:!py-5 lg:flex-row
                 lg:items-center lg:gap-4`,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700",children:"Ngày bắt đầu"}),e.jsx(F,{value:f,onChange:t=>M(t),format:"DD/MM/YYYY",className:"mt-1 block w-full text-black rounded-lg border border-gray-300 px-3 py-2 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700",children:"Ngày kết thúc"}),e.jsx(F,{value:u,onChange:t=>K(t),format:"DD/MM/YYYY",className:"mt-1 block w-full text-black rounded-lg border border-gray-300 px-3 py-2 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("p",{htmlFor:"groupBy",className:"block text-sm font-medium text-gray-700",children:"Nhóm theo"}),e.jsx("div",{children:e.jsxs("select",{id:"groupBy",className:"mt-1 block w-full text-black rounded-lg border border-gray-300 px-3 py-2 text-gray-500 sm:text-sm",value:i,onChange:W,children:[e.jsx("option",{value:"day",children:"Ngày"}),e.jsx("option",{value:"month",children:"Tháng"}),e.jsx("option",{value:"year",children:"Năm"})]})})]})]}),e.jsxs("div",{className:`flex ${i==="day"?"flex-col":"flex-row"} justify-between gap-3 mt-4`,children:[e.jsx(O,{data:x,title:"Đơn hàng"}),e.jsx(O,{data:N,title:"Doanh thu",color:"gray"})]})]})})};export{ue as default};
